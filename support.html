<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>DE.BBMRI.FHIR\Support - FHIR v4.0.1</title>
  
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link rel="stylesheet" href="fhir.css"/>
     
      <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="assets/css/bootstrap.css"/>
    <link rel="stylesheet" href="assets/css/bootstrap-fhir.css"/>
  
      <!-- Project extras -->
    <link rel="stylesheet" href="assets/css/project.css"/>
    <link rel="stylesheet" href="assets/css/pygments-manni.css"/>
    <link rel="stylesheet" href="assets/css/jquery-ui.css"/>
      <!-- Placeholder for child template CSS declarations -->
<link rel="stylesheet" href="assets/css/bbmri.de.css"/>

    <script src="fhir-table-scripts.js" type="text/javascript"> </script>

      <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
      <!-- [if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif] -->
  
      <!-- Favicons -->
    <link sizes="144x144" rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-144-precomposed.png"/>
    <link sizes="114x114" rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-114-precomposed.png"/>
    <link sizes="72x72" rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-72-precomposed.png"/>
    <link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body>

    <style type="text/css">h2{--heading-prefix:"7"}
    h3,h4,h5,h6{--heading-prefix:"7"}</style>
    <div id="segment-header" class="segment">    <!-- segment-header -->
      <div class="container">    <!-- container -->
        
	<div id="gba-nav">
	  <a no-external="true" id="gba-logo" href="http://www.bbmri.de">
	    <img src="assets/images/GBN_CMYK_schwarz.png" alt="GBA Logo" height="80"/>
	  </a>
	</div>
	<div id="buffer">
	</div>

        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">BBMRI.de/GBA Implementation Guide</span><br/>1.0.1 - Release</p>
        </div>
      </div>   <!-- /container -->
    </div>    <!-- /segment-header -->
    
    <div id="segment-navbar" class="segment">    <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">    <!-- container -->
          <!-- HEADER CONTENT -->
    
        <nav class="navbar navbar-inverse">
            <!-- status-bar -->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" data-toggle="collapse" type="button" class="navbar-toggle">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a href="http://hl7.org/fhir/R4/index.html" class="navbar-brand hidden">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
              <ul class="nav navbar-nav">
  <li><a href="index.html">IG Home</a></li>
  <li><a href="toc.html">Table of Contents</a></li>
  <li><a href="overview.html">Profile Overview</a></li>
  <li><a href="howtoJoin.html">How to Join the Sample Locator</a></li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Background<b class="caret">
      </b>
    </a>
    <ul class="dropdown-menu">
	<li>
        <a href="background.html">Overview</a>
      </li>
      <li>
        <a href="mappings.html">Mappings</a>
      </li>
	  <li>
        <a href="referencedIGs.html">Referenced IGs</a>
      </li>
    <li>
        <a href="etlTalent.html">Build ETL with TOS</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Support<b class="caret">
      </b>
    </a>
    <ul class="dropdown-menu">
	<li>
        <a href="support.html">Instructions</a>
      </li>
      <li>
        <a href="downloads.html">Downloads</a>
      </li>
    </ul>
  </li>
  <li><a href="artifacts.html">Artifact Index</a></li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Links<b class="caret">
      </b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="http://hl7.org/fhir/R4/index.html" target="_blank">FHIR Spec <img src="external.png" style="text-align: baseline"/></a>
      </li>
    </ul>
  </li>
</ul>      

            </div>    <!-- /.nav-collapse -->
          </div>    <!-- /.container -->
        </nav>    <!-- /.navbar -->
        <!-- /HEADER CONTENT -->
      </div>    <!-- /container -->
    </div>    <!-- /segment-navbar -->
      <!-- status-bar -->
    <div id="segment-breadcrumb" class="segment">    <!-- segment-breadcrumb -->
      <div class="container">    <!-- container -->  
        <ul class="breadcrumb">
          <li><a href="toc.html"><b>Table of Contents</b></a></li><li><b>Support</b></li>
        </ul>  
      </div>    <!-- /container -->
    </div>    <!-- /segment-breadcrumb -->
    
    <div id="segment-content" class="segment">    <!-- segment-content -->
      <div class="container">    <!-- container -->
        <div class="row">
          <div class="inner-wrapper">
<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
    <!-- ReleaseHeader --><p id="publish-box">BBMRI.de/GBA Implementation Guide - Local Development build (v1.0.1). See the <a href="https://fhir.bbmri.de/history.html">Directory of published versions</a></p>  <!-- EndReleaseHeader -->
  <h2>Support</h2>
  
  
  
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#using-references-in-bundles" id="markdown-toc-using-references-in-bundles">Using References in Bundles</a>    <ul>
      <li><a href="#internal-references" id="markdown-toc-internal-references">Internal References</a></li>
      <li><a href="#external-references" id="markdown-toc-external-references">External References</a></li>
      <li><a href="#fullurls" id="markdown-toc-fullurls">fullUrls</a></li>
    </ul>
  </li>
</ul>

</div>
<p>##Validation</p>

<p>While there are <a href="https://www.hl7.org/fhir/validation.html">multiple ways</a> to validate FHIR resources, we recommend using the Validator JAR. The full documentation for the JAR can be found <a href="https://wiki.hl7.org/index.php?title=Using_the_FHIR_Validator">here</a>. The following section gives step-by-step instructions for validating a resource against the BBMRI.de ImplementationGuide using the validator JAR.</p>

<p><em>Since the package creation mechanism is currently still under development, this guide assumes all dependencies must be resolved manually by downloading files from other IGs. We are working on providing a package including the BBMRI.de artefacts and dependencies, which will make the extra downloading steps obsolete.</em></p>

<p>There are two ways of obtaining the necessary profiles: <strong>A</strong> by using the packaged version found on GitHub or <strong>B</strong> using the JSON files from Simplifier. Both methods work since their content is identical, however the packaged profiles use FHIR v4.0.1 while the files on Simplifier use v4.0.0 since Simplifier does not yet support the newer version. We recommend using the packed version <strong>A</strong>.</p>

<p><strong>1. Download the latest JAR from <a href="https://fhir.github.io/latest-ig-publisher/org.hl7.fhir.validator.jar">here</a>.</strong> Using the latest version is important since bug-fixing updates happen regularly.</p>

<p><strong>A2. Download the BBMRI.de validator pack from the https://github.com/samply/bbmri-fhir-ig releases section.</strong></p>

<p><strong>B2.1 Download the BBMRI.de profiles from https://simplifier.net/bbmri.de.</strong> On the upper right corner under Download, select <em>Zip valid resources as JSON</em>.</p>

<p><strong>B2.2 Unzip the profiles.</strong> In this example, we assume the resulting folder is called <em>bbmri.de</em>.</p>

<p><a name="bc503952-c674-46ca-9fd2-be7ec2f54426">​</a><strong>4. Download the dependencies.</strong> The BBMRI.de IG depends on some items from the International Patient Summary, so download the package from <a href="http://hl7.org/fhir/uv/ips/2019Sep/validator.pack">here</a> and save it e.g. as <em>IPS.pack</em> next to the BBMRI.de validator pack / folder with the BBMRI.de profiles. If you are using ICD-10-GM Codings in your Conditions, you also need <a href="https://simplifier.net/basisprofil-de-r4/codingicd10gm">this</a> profile from the Deutsche Basisprofile. The JSON File can just be added to the BBMRI.de folder or saved next to the validator pack.</p>

<p><strong>5. Move the resources you want to validate into one single, flat directory.</strong> Every resource should be its own, meaningfully named JSON file. Files in subfolders will not be validated (this feature might be added in future validator releases).</p>

<p><strong>A6. Run the validator using the validator pack.</strong> Assuming you re-named the original validator JAR to <em>validator.jar</em>, placed it in the same directory as the <em>BBMRI.de.pack</em>, the <em>IPS.pack</em> and optionally the <em>CodingICD10GM.json</em> file, and have your resources in a subfolder named <em>resources</em>, use the command <code class="highlighter-rouge">java -jar validator.jar -version 4.0.1 -ig IPS.pack -ig bbmri.de.pack -ig CodingICD10GM.json resources</code>.</p>

<p><strong>B6. Run the validator using JSON profiles.</strong> Assuming you re-named the original validator JAR to <em>validator.jar</em>, placed it in the same directory as the folder bbmri.de containing the profiles and the <em>IPS.pack</em>, and have your resources in a subfolder named <em>resources</em>, use the command <code class="highlighter-rouge">java -jar validator.jar -version 4.0.0 -ig IPS.pack -ig bbmri.de resources</code>.</p>

<p><strong>7. Look at the output log.</strong> FAILURE indicates an error that has to be fixed, while WARNINGS indicate problems that are sometimes the result of conscious decisions, like choosing an external code for a field with a preferred ValueSet binding. Other warnings may be caused by the validator failing to find a ValueSet or CodeSystem and therefore being unable to validate a certain code. Still, warnings should always be examined to assure that their causes are intended features or validator faults and not implementer oversights.</p>

<p>In addition to the GBA-Zulip, general validation issues are discussed on the FHIR Chat <a href="https://chat.fhir.org/#narrow/stream/179177-conformance">here</a>.</p>

<h2 id="using-references-in-bundles">Using References in Bundles</h2>

<p>Using a FHIR server which supports <em><a href="https://www.hl7.org/fhir/http.html#upsert">update-as-create</a></em> like <a href="https://github.com/life-research/blaze">Blaze</a> allows to define the logical Ids and therefore the URLs of the created resources.
This proves useful when the store is filled via a large ETL-process since this means the logical Ids can be determined by the ETL-process directly.</p>

<p>This section provides some examples on how to deal with Bunle-internal and Bundle-external references in such a scenario.</p>

<h3 id="internal-references">Internal References</h3>

<p>Here, internal references mean references to other resources in a Bundle, for example, an Observation referes to a subject (Patient) that is part of the same <em>update-as-create</em> Bundle. This references consist of <em>[ResouceType]/[id]</em>, e.g. <em>Patient/23</em>.</p>

<h3 id="external-references">External References</h3>

<p>External references point to resources outside a Bundle. These references have the form of <em>[fhirBase]/[ResourceType]/[id]</em>, e.g. <em>https://store.example.com/fhir/Collection/0</em>.</p>

<h3 id="fullurls">fullUrls</h3>

<p>In <em>create-as-update</em> Bundles, all entries need a <em>fullUrl</em>. This does not need to be an existing FHIR endpoint, as long as all entries use the same base all reference can be resolved. 
For example, using <em>http://example.com/</em> as a base is a working solution. Internal references to entries using the same base can be relative ([type]/[id]).
External references on the other hand need to be absolute, resolveable URLs.</p>

<p>If neither a absolute nor relative literal reference is possible, a <a href="https://www.hl7.org/fhir/references.html#logical">logical reference</a> can be used to point to a resource e.g. by its Identifier. Note that servers will not necessarily resolve this references automatically, which may cause problems when trying to acess the referenced resource later on.</p>


</div>
        </div>    <!-- /inner-wrapper -->
      </div>    <!-- /row -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-content -->


  <div igtool="footer" id="segment-footer" class="segment">    <!-- segment-footer -->
    <div class="container">    <!-- container -->
      <div class="inner-wrapper">
        <p>
          IG &copy; 2020+ <a style="color: #81BEF7" href="https://www.bbmri.de">BBMRI.de</a>.  Package de.bbmri.fhir#1.0.1 based on <a style="color: #81BEF7" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Fri, May 8, 2020 11:20+0000">2020-05-08</span>
          <br/>
          <span style="color: #FFFF77">
                      Links: <a style="color: #81BEF7" href="toc.html">Table of Contents</a> |
                 <a style="color: #81BEF7" href="qa.html">QA Report</a>
          </span>
        </p>
      </div>    <!-- /inner-wrapper -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">    <!-- segment-post-footer -->
    <div class="container">    <!-- container -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-post-footer -->
  
    <!-- JS and analytics only. -->
    <!-- Bootstrap core JavaScript
  ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
  <script src="assets/js/jquery.js" type="text/javascript"> </script>       <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script src="assets/js/bootstrap.min.js" type="text/javascript"> </script>
  <script src="assets/js/respond.min.js" type="text/javascript"> </script>
  <script src="assets/js/anchor.min.js" type="text/javascript"> </script>
  <script>anchors.options.visible = 'hover'
anchors.add()</script>
  
    <!-- Analytics Below
  ================================================== -->
  </body>
</html>